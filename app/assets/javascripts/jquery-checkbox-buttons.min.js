$(function(){$(".button-checkbox").each(function(){function t(){var t=e.is(":checked");c.data("state",t?"on":"off"),c.find(".state-icon").attr("class","").addClass("state-icon"),t?c.removeClass("btn-default").addClass("btn-"+i+" active"):c.removeClass("btn-"+i+" active").addClass("btn-default")}function n(){t(),0==c.find(".state-icon").length&&c.prepend('<i class="state-icon"></i>')}var a=$(this),c=a.find("button"),e=a.find("input:checkbox"),i=c.data("color");c.on("click",function(){e.prop("checked",!e.is(":checked")),e.triggerHandler("change"),t()}),e.on("change",function(){t()}),n()})});